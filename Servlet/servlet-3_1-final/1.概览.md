## 1.1 What is a Servlet? 

> 1.1 什么是Servlet？

A servlet is a JavaTM technology-based Web component, managed by a container, that generates dynamic content. Like other Java technology-based components, servlets are platform-independent Java classes that are compiled to platform-neutral byte code that can be loaded dynamically into and run by a Java technology-enabled Web server. Containers, sometimes called servlet engines, are Web server extensions that provide servlet functionality. Servlets interact with Web clients via a request/response paradigm implemented by the servlet container.

> Servlet 是基于 JavaTM 技术的 Web 组件，由容器管理，可生成动态内容。与其他基于 Java 技术的组件一样，servlet 是独立于平台的 Java 类，它们被编译为与平台无关的字节代码，可以动态加载到支持 Java 技术的 Web 服务器中并由其运行。容器（有时称为 servlet 引擎）是提供 servlet 功能的 Web 服务器扩展。 Servlet 通过 servlet 容器实现的请求/响应范例与 Web 客户端进行交互。

## 1.2 What is a Servlet Container? 

> 1.2 什么是Servlet容器？

The servlet container is a part of a Web server or application server that provides the network services over which requests and responses are sent, decodes MIME-based requests, and formats MIME-based responses. A servlet container also contains and manages servlets through their lifecycle.

> Servlet 容器是 Web 服务器或应用程序服务器的一部分，它提供发送请求和响应的网络服务、解码基于 MIME 的请求以及格式化基于 MIME 的响应。 servlet 容器还包含并管理 servlet 的整个生命周期。

A servlet container can be built into a host Web server, or installed as an add-on component to a Web Server via that server’s native extension API. Servlet containers can also be built into or possibly installed into Web-enabled application servers.

> servlet 容器可以内置到主机 Web 服务器中，或者通过该服务器的本机扩展 API 作为附加组件安装到 Web 服务器。 Servlet 容器还可以内置或可能安装到支持 Web 的应用程序服务器中。

All servlet containers must support HTTP as a protocol for requests and responses, but additional request/response-based protocols such as HTTPS (HTTP over SSL) may be supported. The required versions of the HTTP specification that a container must implement are HTTP/1.0 and HTTP/1.1. Because the container may have a caching mechanism described in RFC2616 (HTTP/1.1), it may modify requests from the clients before delivering them to the servlet, may modify responses produced by servlets before sending them to the clients, or may respond to requests without delivering them to the servlet under the compliance with RFC2616.

> 所有 servlet 容器都必须支持 HTTP 作为请求和响应的协议，但也可能支持其他基于请求/响应的协议，例如 HTTPS（基于 SSL 的 HTTP）。容器必须实现的 HTTP 规范的所需版本是 HTTP/1.0 和 HTTP/1.1。因为容器可能具有 RFC2616 (HTTP/1.1) 中描述的缓存机制，所以它可以在将来自客户端的请求传递到 servlet 之前对其进行修改，可以在将 servlet 生成的响应发送到客户端之前修改它们，或者可以在不进行响应的情况下响应请求。根据 RFC2616 将它们传递给 servlet。

A servlet container may place security restrictions on the environment in which a servlet executes. In a Java Platform, Standard Edition (J2SE, v.1.3 or above) or Java Platform, Enterprise Edition (Java EE, v.1.3 or above) environment, these restrictions should be placed using the permission architecture defined by the Java platform. For example, high-end application servers may limit the creation of a Thread object to insure that other components of the container are not negatively impacted.

> servlet 容器可以对 servlet 执行的环境设置安全限制。在 Java 平台标准版（J2SE，v.1.3 或更高版本）或 Java 平台企业版（Java EE，v.1.3 或更高版本）环境中，应使用 Java 平台定义的权限体系结构来设置这些限制。例如，高端应用程序服务器可能会限制 Thread 对象的创建，以确保容器的其他组件不会受到负面影响。

Java SE 7 is the minimum version of the underlying Java platform with which servlet containers must be built.

> Java SE 7 是构建 servlet 容器所必须使用的底层 Java 平台的最低版本。

## 1.3 An Example 

> 1.3 一个例子

The following is a typical sequence of events:

> 以下是典型的事件顺序：

1. A client (e.g., a Web browser) accesses a Web server and makes an HTTP request.

   > 客户端（例如 Web 浏览器）访问 Web 服务器并发出 HTTP 请求。

2. The request is received by the Web server and handed off to the servlet container. The servlet container can be running in the same process as the host Web server, in a different process on the same host, or on a different host from the Web server for which it processes requests.

   > Web 服务器接收请求并将其传递给 servlet 容器。 servlet 容器可以运行在与主机 Web 服务器相同的进程中，也可以运行在同一主机上的不同进程中，也可以运行在与其处理请求的 Web 服务器不同的主机上。

3. The servlet container determines which servlet to invoke based on the configuration of its servlets, and calls it with objects representing the request and response.
   servlet 容器根据 servlet 的配置确定要调用哪个 servlet，并使用表示请求和响应的对象来调用它。

4. The servlet uses the request object to find out who the remote user is, what HTTP POST parameters may have been sent as part of this request, and other relevant data. The servlet performs whatever logic it was programmed with, and generates data to send back to the client. It sends this data back to the client via the response object.

   > Servlet 使用请求对象来查明远程用户是谁、作为此请求的一部分可能发送了哪些 HTTP POST 参数以及其他相关数据。 servlet 执行它所编程的任何逻辑，并生成数据发送回客户端。它通过响应对象将此数据发送回客户端。

5. Once the servlet has finished processing the request, the servlet container ensures that the response is properly flushed, and returns control back to the host Web server.

   > 一旦 Servlet 完成对请求的处理，Servlet 容器就会确保正确刷新响应，并将控制权返回给主机 Web 服务器。

## 1.4 Comparing Servlets with Other Technologies 

>1.4 Servlet 与其他技术的比较

In functionality, servlets lie somewhere between Common Gateway Interface (CGI) programs and proprietary server extensions such as the Netscape Server API (NSAPI) or Apache Modules.

> 在功能上，Servlet 介于通用网关接口 (CGI) 程序和专有服务器扩展（例如 Netscape Server API (NSAPI) 或 Apache 模块）之间。

Servlets have the following advantages over other server extension mechanisms:

> 与其他服务器扩展机制相比，Servlet 具有以下优点：

- They are generally much faster than CGI scripts because a different process model is used.

  > 它们通常比 CGI 脚本快得多，因为使用了不同的进程模型。

- They use a standard API that is supported by many Web servers.

  > 它们使用许多 Web 服务器支持的标准 API。

- They have all the advantages of the Java programming language, including ease of development and platform independence.

  > 它们具有 Java 编程语言的所有优点，包括易于开发和平台独立性。

- They can access the large set of APIs available for the Java platform.

  > 他们可以访问可用于 Java 平台的大量 API。

## 1.5 Relationship to Java Platform, Enterprise Edition 

>1.5 与 Java 平台企业版的关系

The Java Servlet API v.3.1 is a required API of the Java Platform, Enterprise Edition, 71. Servlet containers and servlets deployed into them must meet additional requirements, described in the Java EE specification, for executing in a Java EE environment.

> Java Servlet API v.3.1 是 Java Platform, Enterprise Edition, 71 必需的 API。Servlet 容器和部署到其中的 Servlet 必须满足 Java EE 规范中描述的附加要求，才能在 Java EE 环境中执行。

## 1.6 Compatibility with Java Servlet Specification Version 2.5 

>1.6 与 Java Servlet 规范版本 2.5 的兼容性

### 1.6.1 Processing annotations 

>1.6.1 处理注解

In Servlet 2.5, metadata-complete only affected the scanning of annotations at deployment time. The notion of web-fragments did not exist in servlet 2.5. However in servlet 3.0 and later, metadata-complete affects scanning of all annotations that specify deployment information and web-fragments at deployment time. The version of the descriptor MUST not affect which annotations you scan for in a web application. An implementation of a particular version of the specification MUST scan for all annotations supported in that configuration, unless metadata- complete is specified.

> 在 Servlet 2.5 中，元数据完整仅影响部署时注释的扫描。 Servlet 2.5 中不存在 Web 片段的概念。然而，在 servlet 3.0 及更高版本中，元数据完整会影响在部署时指定部署信息和 Web 片段的所有注释的扫描。描述符的版本不得影响您在 Web 应用程序中扫描的注释。规范的特定版本的实现必须扫描该配置中支持的所有注释，除非指定了元数据完整。